
CREATE TABLE DB2ADMIN.PERFILENFERMEIRO
	(
	ID_PERFIL_ENFERMEIRO INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY,
	DESCRICAO            VARCHAR (20),
	CONSTRAINT CODIGO_PERFIL_ENFERMEIRO PRIMARY KEY (ID_PERFIL_ENFERMEIRO)
	);
	
CREATE TABLE DB2ADMIN.ENFERMEIRO
	(
	ID_ENFERMEIRO        INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY,
	NOME_ENFERMEIRO      VARCHAR (100) NOT NULL,
	STATUS_ENFERMEIRO    VARCHAR (8) NOT NULL,
	PERFIL_ENFERMEIRO_ID INTEGER NOT NULL,
	USER_NAME            VARCHAR (50) NOT NULL,
	SENHA                VARCHAR (100) NOT NULL,
	CONSTRAINT CODIGO_ENFERMEIRO PRIMARY KEY (ID_ENFERMEIRO),
	CONSTRAINT ID_PERFIL_ENFERMEIRO FOREIGN KEY (PERFIL_ENFERMEIRO_ID) REFERENCES DB2ADMIN.PERFILENFERMEIRO (ID_PERFIL_ENFERMEIRO)
	);

CREATE TABLE DB2ADMIN.PACIENTE
	(
	ID_PACIENTE     INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY,
	NOME            VARCHAR (100) NOT NULL,
	RG              VARCHAR (11) NOT NULL,
	CPF             VARCHAR (11) NOT NULL,
	TELEFONE        VARCHAR (20),
	SEXO            VARCHAR (12) NOT NULL,
	DATA_NASCIMENTO DATE NOT NULL,
	CONSTRAINT CODIGO_PACIENTE PRIMARY KEY (ID_PACIENTE),
	CONSTRAINT CPF_UNIQUE UNIQUE (CPF)
	);
CREATE TABLE DB2ADMIN.ANAMNESE
	(
	ID_ANAMNESE            INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY,
	DATA_REALIZACAO        TIMESTAMP NOT NULL,
	HISTORICO_DOENCAS      VARCHAR (5000) NOT NULL,
	HISTORICO_FAMILIAR     VARCHAR (5000) NOT NULL,
	INFORMACOES_ADICIONAIS VARCHAR (5000),
	ID_ENFERMEIRO          INTEGER NOT NULL,
	ID_PERFIL_ENFERMEIRO   INTEGER NOT NULL,
	ID_PACIENTE            INTEGER NOT NULL,
	CONSTRAINT CODIGO_ANAMNESE PRIMARY KEY (ID_ANAMNESE),
	CONSTRAINT ID_ENFERMEIRO_FK FOREIGN KEY (ID_ENFERMEIRO) REFERENCES DB2ADMIN.ENFERMEIRO (ID_ENFERMEIRO),
	CONSTRAINT ID_PACIENTE_FK FOREIGN KEY (ID_PACIENTE) REFERENCES DB2ADMIN.PACIENTE (ID_PACIENTE),
	CONSTRAINT ID_PERFIL_ENFERMEIRO_FK FOREIGN KEY (ID_PERFIL_ENFERMEIRO) REFERENCES DB2ADMIN.PERFILENFERMEIRO (ID_PERFIL_ENFERMEIRO)
	);
CREATE TABLE DB2ADMIN.TIPOTRATAMENTO
	(
	ID_TIPO_TRATAMENTO SMALLINT NOT NULL GENERATED ALWAYS AS IDENTITY (MAXVALUE 32767),
	CLASSIFICACAO      VARCHAR (20),
	CONSTRAINT CODIGO_TIPO_TRATAMENTO PRIMARY KEY (ID_TIPO_TRATAMENTO)
	);
CREATE TABLE DB2ADMIN.PROCEDIMENTO
	(
	ID_PROCEDIMENTO SMALLINT NOT NULL GENERATED ALWAYS AS IDENTITY (MAXVALUE 32767),
	DESCRICAO       VARCHAR (400) NOT NULL,
	CONSTRAINT CODIGO_PROCEDIMENTO PRIMARY KEY (ID_PROCEDIMENTO)
	);
CREATE TABLE DB2ADMIN.PRODUTO
	(
	ID_PRODUTO SMALLINT NOT NULL GENERATED ALWAYS AS IDENTITY (MAXVALUE 32767),
	DESCRICAO  VARCHAR (100),
	UNIDADE    VARCHAR (30),
	CONSTRAINT CODIGO_PRODUTO PRIMARY KEY (ID_PRODUTO)
	);
CREATE TABLE DB2ADMIN.TRATAMENTO
	(
	ID_TRATAMENTO       INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY,
	ID_TIPO_TRATAMENTO  SMALLINT NOT NULL,
	DESCRICAOTRATAMENTO VARCHAR (50) NOT NULL,
	PERIODICIDADE       VARCHAR (50) NOT NULL,
	CONSTRAINT CODIGO_TRATAMENTO PRIMARY KEY (ID_TRATAMENTO),
	CONSTRAINT ID_TIPO_TRATAMENTO_FK FOREIGN KEY (ID_TIPO_TRATAMENTO) REFERENCES DB2ADMIN.TIPOTRATAMENTO (ID_TIPO_TRATAMENTO)
	);
CREATE TABLE DB2ADMIN.ENFERMEIRO_REALIZA_AVALIACAO
	(
	ID_ENFERMEIRO        INTEGER NOT NULL,
	ID_PERFIL_ENFERMEIRO INTEGER NOT NULL,
	ID_AVALIACAO         INTEGER NOT NULL,
	ID_PACIENTE          INTEGER NOT NULL,
	CONSTRAINT ID_ENFERMEIRO_REALIZA_AV_FK FOREIGN KEY (ID_ENFERMEIRO) REFERENCES DB2ADMIN.ENFERMEIRO (ID_ENFERMEIRO),
	CONSTRAINT ID_PERFIL_ENFERMEIRO_REALIZA_AV_FK FOREIGN KEY (ID_PERFIL_ENFERMEIRO) REFERENCES DB2ADMIN.PERFILENFERMEIRO (ID_PERFIL_ENFERMEIRO)
	);
CREATE TABLE DB2ADMIN.STATUS_ACOMPANHAMENTO
	(
	ID_STATUS_ACOMPANHAMENTO INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY,
	DESCRICAO                VARCHAR (50) NOT NULL,
	CONSTRAINT CODIGO_STATUS_ACOMPANHAMENTO PRIMARY KEY (ID_STATUS_ACOMPANHAMENTO)
	);
CREATE TABLE DB2ADMIN.ACOMPANHAMENTO
	(
	ID_ACOMPANHAMENTO         INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY,
	ID_TRATAMENTO             INTEGER NOT NULL,
	DATAREALIZACAO            TIMESTAMP NOT NULL,
	ID_STATUSACOMPANHAMENTO   INTEGER NOT NULL,
	INFORMACOESCOMPLEMENTARES VARCHAR (2000),
	ID_PACIENTE               INTEGER NOT NULL,
	FLAG_ALTA                 INTEGER NOT NULL,
	ID_ENFERMEIRO             INTEGER,
	PONTUACAO_RECALCULADA     INTEGER NOT NULL,
	PRIORIDADE                VARCHAR (50),
	CONSTRAINT CODIGO_ACOMPANHAMENTO PRIMARY KEY (ID_ACOMPANHAMENTO),
	CONSTRAINT ID_AVALIACAO_PACIENTE_ACOMPANHAMENTO_FK FOREIGN KEY (ID_PACIENTE) REFERENCES DB2ADMIN.PACIENTE (ID_PACIENTE),
	CONSTRAINT ID_ENFERMEIRO_ACOMPANHAMENTO_FK FOREIGN KEY (ID_ENFERMEIRO) REFERENCES DB2ADMIN.ENFERMEIRO (ID_ENFERMEIRO),
	CONSTRAINT ID_TRATAMENTO_ACOMPANHAMENTO_FK FOREIGN KEY (ID_TRATAMENTO) REFERENCES DB2ADMIN.TRATAMENTO (ID_TRATAMENTO)
	);
CREATE TABLE DB2ADMIN.TRATAMENTO_POSSUE_PROCEDIMENTO
	(
	ID_TRATAMENTO      INTEGER NOT NULL,
	ID_PROCEDIMENTO    SMALLINT NOT NULL,
	ID_TIPO_TRATAMENTO SMALLINT NOT NULL,
	CONSTRAINT ID_TIPO_TRATAMENTO_PROCEDIMENTO_FK FOREIGN KEY (ID_TIPO_TRATAMENTO) REFERENCES DB2ADMIN.TIPOTRATAMENTO (ID_TIPO_TRATAMENTO),
	CONSTRAINT ID_TRATAMENTO_PROCEDIMENTO_FK FOREIGN KEY (ID_PROCEDIMENTO) REFERENCES DB2ADMIN.PROCEDIMENTO (ID_PROCEDIMENTO),
	CONSTRAINT ID_TRATAMENTO_PROCEDIMENTO_TRATAMENTO_FK FOREIGN KEY (ID_TRATAMENTO) REFERENCES DB2ADMIN.TRATAMENTO (ID_TRATAMENTO),
	CONSTRAINT TRAT_PROC_COMPOSITE_PRIMARY_KEY PRIMARY KEY (ID_TRATAMENTO, ID_PROCEDIMENTO, ID_TIPO_TRATAMENTO)
	);
CREATE TABLE DB2ADMIN.TRATAMENTO_POSSUE_PRODUTO
	(
	ID_TRATAMENTO      INTEGER NOT NULL,
	ID_PRODUTO         SMALLINT NOT NULL,
	ID_TIPO_TRATAMENTO SMALLINT NOT NULL,
	CONSTRAINT ID_TIPO_TRATAMENTO_PRODUTO_FK FOREIGN KEY (ID_TIPO_TRATAMENTO) REFERENCES DB2ADMIN.TIPOTRATAMENTO (ID_TIPO_TRATAMENTO),
	CONSTRAINT ID_TRATAMENTO_PRODUTO_FK FOREIGN KEY (ID_TRATAMENTO) REFERENCES DB2ADMIN.TRATAMENTO (ID_TRATAMENTO),
	CONSTRAINT TRATAMENTO_PRODUTO_FK FOREIGN KEY (ID_PRODUTO) REFERENCES DB2ADMIN.PRODUTO (ID_PRODUTO),
	CONSTRAINT TRAT_PROD_COMPOSITE_PRIMARY_KEY PRIMARY KEY (ID_TRATAMENTO, ID_PRODUTO, ID_TIPO_TRATAMENTO)
	);
CREATE TABLE DB2ADMIN.HISTORICO_ACOMPANHAMENTO
	(
	ID_HISTORICO_ACOMPANHAMENTO INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY,
	ID_ACOMPANHAMENTO           INTEGER NOT NULL,
	ID_TRATAMENTO               INTEGER NOT NULL,
	DATAREALIZACAO              TIMESTAMP NOT NULL,
	ID_STATUSACOMPANHAMENTO     SMALLINT NOT NULL,
	INFORMACOESCOMPLEMENTARES   VARCHAR (2000),
	ID_PACIENTE                 INTEGER NOT NULL,
	FLAG_ALTA                   INTEGER NOT NULL,
	ID_ENFERMEIRO               INTEGER,
	PONTUACAO_RECALCULADA       INTEGER NOT NULL,
	PRIORIDADE                  VARCHAR (100),
	CONSTRAINT CODIGO_HISTORICO_ACOMPANHAMENTO PRIMARY KEY (ID_HISTORICO_ACOMPANHAMENTO),
	CONSTRAINT ID_ACOMPANHAMENTO_FK FOREIGN KEY (ID_ACOMPANHAMENTO) REFERENCES DB2ADMIN.ACOMPANHAMENTO (ID_ACOMPANHAMENTO),
	CONSTRAINT ID_AVALIACAO_PACIENTE_ACOMPANHAMENTO_FK FOREIGN KEY (ID_PACIENTE) REFERENCES DB2ADMIN.PACIENTE (ID_PACIENTE),
	CONSTRAINT ID_ENFERMEIRO_ACOMPANHAMENTO_FK FOREIGN KEY (ID_ENFERMEIRO) REFERENCES DB2ADMIN.ENFERMEIRO (ID_ENFERMEIRO),
	CONSTRAINT ID_TRATAMENTO_ACOMPANHAMENTO_FK FOREIGN KEY (ID_TRATAMENTO) REFERENCES DB2ADMIN.TRATAMENTO (ID_TRATAMENTO)
	);
CREATE TABLE DB2ADMIN.ANEXO
	(
	ID_ANEXO                    INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY,
	ID_HISTORICO_ACOMPANHAMENTO INTEGER NOT NULL,
	ID_ACOMPANHAMENTO           INTEGER,
	CAMINHO                     VARCHAR (500),
	NOME_ANEXO                  VARCHAR (300) NOT NULL,
	CONSTRAINT CODIGO_ANEXO PRIMARY KEY (ID_ANEXO),
	CONSTRAINT ID_ACOMPANHAMENTO_ANEXO_FK FOREIGN KEY (ID_ACOMPANHAMENTO) REFERENCES DB2ADMIN.ACOMPANHAMENTO (ID_ACOMPANHAMENTO),
	CONSTRAINT ID_HIST_ACOMP_ANEXO_FK FOREIGN KEY (ID_HISTORICO_ACOMPANHAMENTO) REFERENCES DB2ADMIN.HISTORICO_ACOMPANHAMENTO (ID_HISTORICO_ACOMPANHAMENTO)
	);

